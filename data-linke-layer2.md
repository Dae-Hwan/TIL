[참고 블로그(OSI 2계층 설명)](https://jhnyang.tistory.com/403)
[참고 블로그(네트워크 계층별 프로토콜)](https://needjarvis.tistory.com/158)

---

- 물리계층
하드웨어적 특성
데이터 전송을 위해 시스템간의 물리적인 연결을 함.(컴퓨터, 랜 케이블, 허브/스위치)
전기 신호의 변환 및 제어 역할. 전기적인 신호로 바꾸어 전송하는 일.(랜카드)
>![](https://images.velog.io/images/gigymi2005/post/979650da-df61-4f2b-826b-46882bee1163/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-25%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%209.33.11.png)
<p style=font-size:15px>이미지 참조: https://jhnyang.tistory.com/403</p>

>![](https://images.velog.io/images/gigymi2005/post/076662e2-2287-44c7-bce3-7a1125a5c366/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-25%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%2010.57.36.png)
<p style=font-size:15px>이미지 참조: https://sstc.tistory.com/1</p>

- 데이터 링크 계층
하드웨어, 소프트웨어적 특성 모두 갖고있음
**직접연결된** 서로 다른 2개의 네트워킹 장치간의 데이터 전송을 담담하는 계층
이 계층에서 전송되는 데이터를 프레임이라고함
이 계층에서 사용되는 다양한 프로토콜들은 용도에 따라 프레임의 종류, 길이 등의 정보를 정의
MAC 이라고 하는 매체 접근 제어 기능(CSMA/CD)
48비트 길이의 mac주소를 가짐

- 데이터링크 계층의 역할

• 노드  대  노드  전달:  서로  인접한  노드  사이의  연결을  링크라고  하는데 데이터링크  계층은  하나의  링크  사이에서  데이터  전달을  담당한다.

• 주소  지정:  상위  계층에서  내려온  패킷에  헤더와  트레일러를  붙이며  헤더에는  현재  노드의  물리 주소와  다음  노드의  물리 주소를  포함시킨다.

• 접근제어: 두  개  이상의  노드들이  동일한  링크에  연결되어  있을  때에  충돌을  방지하기  위한  제어기능이  요구된다.

• 흐름 제어:  수신 노드로  전달되는  패킷의  양이  그  노드가  처리할  수  있는 양보다  많이  유입되는  것을  방지해  주기  위한  방법으로서  수신 노드는  송신 노드와의  통신을  통해  흐름 제어를  수행한다.

• 오류 제어:  데이터링크  계층은  일반적으로  오류가  발생한  프레임  전체를  재전송하는 방식을  사용하여  손상된  데이터를  복구한다.

• 동기화: 송신 노드와  수신 노드  사이에는  클럭이  존재하고  이  클럭에  맞추어  데이터가  전송되는데  데이터가  언제  시작하는지를  수신 노드가  알  필요가  있다.
수신 노드에서  데이터  시작을  알  수  있도록  송신 노드가  헤더 부분이  시작되기  전에  일정한  비트  패턴을  첨가하는  것을  동기화라고 한다.

- 패캣과 프레임 차이
패킷은 네트워킹 OSI 모델의 계층 3 (네트워크 계층-ip 패킷)에있는 PDU-프로토콜 전달 단위입니다. 프레임은 OSI 모델의 레이어 2 (데이터 링크)의 PDU입니다. 패킷 과 프레임 은 서로 다른 네트워크 계층 에서 프로토콜 데이터 단위 (PDU) 에 부여 된 이름입니다

## 스위치의 구조
### MAC 주소 테이블이란?
스위치는 데이터 링크계층에서 동작하고 `레이어2스위치` 또는 `스위칭 허브`라고도 불림.
스위치 내부에는 `MAC 주소 테이블`이 있는데 연결될 mac주소를 저장해놓는 데이터베이스라고 생각하면됨.
`mac 주소 학습 기능` 이 있어서 프레임을 주면 그에 맞는 mac 주소가 데이터베이스에 등록됨
![](https://images.velog.io/images/gigymi2005/post/3c3c8f5f-b558-48aa-97c9-71f225c20cda/KakaoTalk_Photo_2022-01-25-10-48-18%20002.jpeg)

플러딩: 도착지 MAC 주소가 MAC주소 테이블에 등록되어 있지 않으면, 송신 포트 이외의 모든 포트에 데이터(프레임)을 전송하는데 이런 데이터 전송을 `플러딩` 이라고 한다
![](https://images.velog.io/images/gigymi2005/post/3954a369-91d6-4f38-8b63-2d302b7d8381/KakaoTalk_Photo_2022-01-25-10-48-17%20001.jpeg)
등록이 되어 있다면 해당 컴퓨터에만 데이터가 전송이 된다. 이를 `MAC 주소 필터링` 이라고 한다.

## 데이터가 케이블에서 충돌하지 않는 구조
### 전이중 통신과 반이중 통신
전이중 통신 방식: 데이터의 송수신을 동시에 통신하는 방식
반이중 통신 방식: 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식

반이중 통신 방식을 사용하면 충돌이 발생해서 전이중 통신 방식을 사용하는게 좋다.

컴퓨터끼리 통신할때는 크로스케이블로 연결하기때문에 전이중 통신 방식이지만 허브랑 연결할때는 다이렉트케이블로 연결하기 때문에 반이중 통신 방식이다.
하지만 스위치를 사용하면 전이중 통신방식으로 통신할수 있다. (케이블은 다이렉트케이블)
요새는 효율이 높은 전이중 통신 방식으로 사용하기 위해 스위치를 주로 사용한다.
![](https://images.velog.io/images/gigymi2005/post/11309d86-c08f-4732-8b1e-c678538b78e1/KakaoTalk_Photo_2022-01-25-11-05-01%20001.jpeg)
![](https://images.velog.io/images/gigymi2005/post/474930ad-9a55-4f20-89f2-d0f4d360c443/KakaoTalk_Photo_2022-01-25-11-05-02%20003.jpeg)
![](https://images.velog.io/images/gigymi2005/post/1ad93cb9-2757-4156-9e1c-66ea9434f111/KakaoTalk_Photo_2022-01-25-11-05-01%20002.jpeg)


### 충돌 도메인이란?
충돌도메인: 충돌이 발생할 때 그 영향이 미치는 범위. 충돌 도메인의 범위가 넓을 수록 네트워크가 지연이 됨.

허브는 연결되어 있는 컴퓨터 전체가 하나의 충돌 도메인이 된다
![](https://images.velog.io/images/gigymi2005/post/87f9e123-899f-4fae-908d-6a4868cd18c8/KakaoTalk_Photo_2022-01-25-11-11-02%20002.jpeg)
스위치는 충돌이 일어나지도 않지만 충돌도메인 범위도 좁다.
![](https://images.velog.io/images/gigymi2005/post/fdf1e373-b4ad-4e64-95fa-52cf2a9863e2/KakaoTalk_Photo_2022-01-25-11-11-01%20001.jpeg)

### ARP
Address Resolution Protocool의 약어.
목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜.

출발지 컴퓨터가 목적지 주소를 모르면 MAC 주소를 알아내기 위해 네트워크에 브로드캐스트를 하는데 이를 `ARP 요청(request)`라고함. 응답을 `ARP 응답(reply)` 라고함.

출발지 컴퓨터는 이렇게 MAC 주소를 알면 이와 IP 주소의 매핑정보를 메모리에 보관하는데 이를 `ARP 테이블` 이라고 함. 이후 이를 참고해 ARP 요청을함

IP 주소가 변경되면 해당 MAC 주소도 변경되어 제대로 통신을 할 수 없는데 그래서 ARP 테이블에서는 보존기간을 ARP 캐시로 지정하고 일정기간이 지나면 삭제하고 다시 ARP 요청을 보냄.

ARP 캐시내역을 확인하려면 아래 명령어 사용
윈도우: arp -a 
맥: arp -d


*브로드캐스트(Broadcast) 란, 자신의 호스트가 속해 있는 네트워크 전체를 대상으로 패킷을 전송하는 일대다 통신방식 이다. 브로드캐스트는 로컬 랜 상에 붙어있는 모든 네트워크 장비들에게 보내는 통신이다

